"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}var intervals=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],standardTuningNotes=[intervals[4],intervals[9],intervals[2],intervals[7],intervals[11],intervals[4]],scales={aMajor:{id:"aMajor",name:"A Maj",notes:[intervals[9],intervals[11],intervals[1],intervals[2],intervals[4],intervals[6],intervals[8]]},cMajor:{id:"cMajor",name:"C Maj",notes:[intervals[0],intervals[2],intervals[4],intervals[5],intervals[7],intervals[9],intervals[11]]},fSharpMajor:{id:"fSharpMajor",name:"F# Maj",notes:[intervals[6],intervals[8],intervals[10],intervals[11],intervals[1],intervals[3],intervals[5]]},gMajor:{id:"gMajor",name:"G Maj",notes:[intervals[7],intervals[9],intervals[11],intervals[0],intervals[2],intervals[4],intervals[6]]}},selectedScale=scales.cMajor;function getNotesOfString(a){for(var b=[],c=11===intervals.indexOf(a)?0:intervals.indexOf(a)+1;11>=b.length;)intervals[c]||(c=0),b=[].concat(_toConsumableArray(b),[intervals[c]]),c++;return b}function buildFretboard(a){var b=a.portrait,c=!0===b?[].concat(standardTuningNotes):[].concat(standardTuningNotes).reverse();document.getElementById("fretBoard").innerHTML="<div class=\"frets-edge\">".concat(buildFrets(),"</div> \n    ").concat(c.map(function(a,b){return"".concat(buildString(a)," ").concat(5>b?"<div class=\"frets\">".concat(buildFrets(b),"</div>"):"")}).join("")," \n    <div class=\"frets-edge\">").concat(buildFrets(),"</div>\n    </div>")}var buildFrets=function(a){for(var b="",c=0;12>c;c++)b+="<div class=\"fret\">".concat(2===a&&(4===c||6===c||8===c)||11===c&&(0===a||4===a)?"<div class=\"fret-dot\"></div>":"","</div>");return b},buildString=function(a){return"<div class=\"guitar-string\">".concat(getNotesOfString(a).map(function(a){return"<div class=\"note\">".concat(selectedScale.notes.includes(a)?"<div class=\"note-text-backdrop\"></div><span class=\"note-text\"><p>".concat(a,"</p></span>"):"","</div>")}).join(""),"</div>")};function buildNoteSelector(a){var b=a.portrait,c=[];for(var e in scales)c=[].concat(_toConsumableArray(c),["<option value=\"".concat(e,"\">").concat(scales[e].name,"</option>")]);var d=document.getElementById("noteSelect");d.innerHTML=c.join(),d.value=selectedScale.id}function reDrawApp(){return window.innerHeight>window.innerWidth?(document.getElementById("wrapper").className="app-wrapper portrait-mode",buildNoteSelector({portrait:!0}),void buildFretboard({portrait:!0})):void(document.getElementById("wrapper").className="app-wrapper landscape-mode",buildNoteSelector({portrait:!1}),buildFretboard({portrait:!1}))}window.addEventListener("resize",function(){reDrawApp()}),document.getElementById("noteSelect").addEventListener("change",function(a){selectedScale=scales[a.target.value],document.getElementById("noteSelect").value=a.target.value,reDrawApp()}),reDrawApp(),document.getElementById("fullScreen").addEventListener("click",function(){screenfull.isEnabled&&screenfull.toggle()});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQUYsQ0FBUyxLQUFWLENBRDhDLENBRXBFLFFBQVEsQ0FBQyxjQUFULENBQXdCLFlBQXhCLEVBQXNDLEtBQXRDLENBQThDLENBQUMsQ0FBQyxNQUFGLENBQVMsS0FGYSxDQUlwRSxTQUFTLEVBQ1YsQ0FMRCxDLENBT0EsU0FBUyxFLENBRVQsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsWUFBeEIsRUFBc0MsZ0JBQXRDLENBQXVELE9BQXZELENBQWdFLFVBQUssQ0FDOUQsVUFBVSxDQUFDLFNBRG1ELEVBSW5FLFVBQVUsQ0FBQyxNQUFYLEVBQ0QsQ0FMRCxDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW50ZXJ2YWxzID0gW1xuICAnQycsXG4gICdDIycsXG4gICdEJyxcbiAgJ0QjJyxcbiAgJ0UnLFxuICAnRicsXG4gICdGIycsXG4gICdHJyxcbiAgJ0cjJyxcbiAgJ0EnLFxuICAnQSMnLFxuICAnQidcbl07XG5cbmNvbnN0IHN0YW5kYXJkVHVuaW5nTm90ZXMgPSBbXG4gIGludGVydmFsc1s0XSxcbiAgaW50ZXJ2YWxzWzldLFxuICBpbnRlcnZhbHNbMl0sXG4gIGludGVydmFsc1s3XSxcbiAgaW50ZXJ2YWxzWzExXSxcbiAgaW50ZXJ2YWxzWzRdXG5dO1xuXG5jb25zdCBzY2FsZXMgPSB7XG4gIGFNYWpvcjoge1xuICAgIGlkOiAnYU1ham9yJyxcbiAgICBuYW1lOiAnQSBNYWonLFxuICAgIG5vdGVzOiBbXG4gICAgICBpbnRlcnZhbHNbOV0sXG4gICAgICBpbnRlcnZhbHNbMTFdLFxuICAgICAgaW50ZXJ2YWxzWzFdLFxuICAgICAgaW50ZXJ2YWxzWzJdLFxuICAgICAgaW50ZXJ2YWxzWzRdLFxuICAgICAgaW50ZXJ2YWxzWzZdLFxuICAgICAgaW50ZXJ2YWxzWzhdXG4gICAgXVxuICB9LFxuICBjTWFqb3I6IHtcbiAgICBpZDogJ2NNYWpvcicsXG4gICAgbmFtZTogJ0MgTWFqJyxcbiAgICBub3RlczogW1xuICAgICAgaW50ZXJ2YWxzWzBdLFxuICAgICAgaW50ZXJ2YWxzWzJdLFxuICAgICAgaW50ZXJ2YWxzWzRdLFxuICAgICAgaW50ZXJ2YWxzWzVdLFxuICAgICAgaW50ZXJ2YWxzWzddLFxuICAgICAgaW50ZXJ2YWxzWzldLFxuICAgICAgaW50ZXJ2YWxzWzExXVxuICAgIF1cbiAgfSxcbiAgZlNoYXJwTWFqb3I6IHtcbiAgICBpZDogJ2ZTaGFycE1ham9yJyxcbiAgICBuYW1lOiAnRiMgTWFqJyxcbiAgICBub3RlczogW1xuICAgICAgaW50ZXJ2YWxzWzZdLFxuICAgICAgaW50ZXJ2YWxzWzhdLFxuICAgICAgaW50ZXJ2YWxzWzEwXSxcbiAgICAgIGludGVydmFsc1sxMV0sXG4gICAgICBpbnRlcnZhbHNbMV0sXG4gICAgICBpbnRlcnZhbHNbM10sXG4gICAgICBpbnRlcnZhbHNbNV1cbiAgICBdXG4gIH0sXG4gIGdNYWpvcjoge1xuICAgIGlkOiAnZ01ham9yJyxcbiAgICBuYW1lOiAnRyBNYWonLFxuICAgIG5vdGVzOiBbXG4gICAgICBpbnRlcnZhbHNbN10sXG4gICAgICBpbnRlcnZhbHNbOV0sXG4gICAgICBpbnRlcnZhbHNbMTFdLFxuICAgICAgaW50ZXJ2YWxzWzBdLFxuICAgICAgaW50ZXJ2YWxzWzJdLFxuICAgICAgaW50ZXJ2YWxzWzRdLFxuICAgICAgaW50ZXJ2YWxzWzZdXG4gICAgXVxuICB9XG59O1xuXG52YXIgc2VsZWN0ZWRTY2FsZSA9IHNjYWxlc1snY01ham9yJ107XG5cbmZ1bmN0aW9uIGdldE5vdGVzT2ZTdHJpbmcoc3RhcnRpbmdOb3RlKSB7XG4gIHZhciBub3RlcyA9IFtdO1xuICB2YXIgaSA9XG4gICAgaW50ZXJ2YWxzLmluZGV4T2Yoc3RhcnRpbmdOb3RlKSA9PT0gMTFcbiAgICAgID8gMFxuICAgICAgOiBpbnRlcnZhbHMuaW5kZXhPZihzdGFydGluZ05vdGUpICsgMTtcblxuICB3aGlsZSAobm90ZXMubGVuZ3RoIDw9IDExKSB7XG4gICAgaWYgKCFpbnRlcnZhbHNbaV0pIHtcbiAgICAgIGkgPSAwO1xuICAgIH1cbiAgICBub3RlcyA9IFsuLi5ub3RlcywgaW50ZXJ2YWxzW2ldXTtcbiAgICBpKys7XG4gIH1cblxuICByZXR1cm4gbm90ZXM7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkRnJldGJvYXJkKHsgcG9ydHJhaXQgfSkge1xuICBjb25zdCBzdGFydGluZ05vdGVzID1cbiAgICBwb3J0cmFpdCA9PT0gdHJ1ZVxuICAgICAgPyBbLi4uc3RhbmRhcmRUdW5pbmdOb3Rlc11cbiAgICAgIDogWy4uLnN0YW5kYXJkVHVuaW5nTm90ZXNdLnJldmVyc2UoKTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAnZnJldEJvYXJkJ1xuICApLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwiZnJldHMtZWRnZVwiPiR7YnVpbGRGcmV0cygpfTwvZGl2PiBcbiAgICAke3N0YXJ0aW5nTm90ZXNcbiAgICAgIC5tYXAoXG4gICAgICAgIChzdGFydGluZ05vdGUsIHN0cmluZ051bWJlcikgPT5cbiAgICAgICAgICBgJHtidWlsZFN0cmluZyhzdGFydGluZ05vdGUpfSAke1xuICAgICAgICAgICAgc3RyaW5nTnVtYmVyIDwgNVxuICAgICAgICAgICAgICA/IGA8ZGl2IGNsYXNzPVwiZnJldHNcIj4ke2J1aWxkRnJldHMoc3RyaW5nTnVtYmVyKX08L2Rpdj5gXG4gICAgICAgICAgICAgIDogJydcbiAgICAgICAgICB9YFxuICAgICAgKVxuICAgICAgLmpvaW4oJycpfSBcbiAgICA8ZGl2IGNsYXNzPVwiZnJldHMtZWRnZVwiPiR7YnVpbGRGcmV0cygpfTwvZGl2PlxuICAgIDwvZGl2PmA7XG59XG5cbmNvbnN0IGJ1aWxkRnJldHMgPSBzdHJpbmdOdW1iZXIgPT4ge1xuICBsZXQgZnJldHMgPSBgYDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgZnJldHMgKz0gYDxkaXYgY2xhc3M9XCJmcmV0XCI+JHtcbiAgICAgIChzdHJpbmdOdW1iZXIgPT09IDIgJiYgKGkgPT09IDQgfHwgaSA9PT0gNiB8fCBpID09PSA4KSkgfHxcbiAgICAgIChpID09PSAxMSAmJiAoc3RyaW5nTnVtYmVyID09PSAwIHx8IHN0cmluZ051bWJlciA9PT0gNCkpXG4gICAgICAgID8gYDxkaXYgY2xhc3M9XCJmcmV0LWRvdFwiPjwvZGl2PmBcbiAgICAgICAgOiAnJ1xuICAgIH08L2Rpdj5gO1xuICB9XG4gIHJldHVybiBmcmV0cztcbn07XG5cbmNvbnN0IGJ1aWxkU3RyaW5nID0gc3RhcnRpbmdOb3RlID0+XG4gIGA8ZGl2IGNsYXNzPVwiZ3VpdGFyLXN0cmluZ1wiPiR7Z2V0Tm90ZXNPZlN0cmluZyhzdGFydGluZ05vdGUpXG4gICAgLm1hcChcbiAgICAgIG5vdGUgPT5cbiAgICAgICAgYDxkaXYgY2xhc3M9XCJub3RlXCI+JHtcbiAgICAgICAgICBzZWxlY3RlZFNjYWxlLm5vdGVzLmluY2x1ZGVzKG5vdGUpXG4gICAgICAgICAgICA/IGA8ZGl2IGNsYXNzPVwibm90ZS10ZXh0LWJhY2tkcm9wXCI+PC9kaXY+PHNwYW4gY2xhc3M9XCJub3RlLXRleHRcIj48cD4ke25vdGV9PC9wPjwvc3Bhbj5gXG4gICAgICAgICAgICA6ICcnXG4gICAgICAgIH08L2Rpdj5gXG4gICAgKVxuICAgIC5qb2luKCcnKX08L2Rpdj5gO1xuXG5mdW5jdGlvbiBidWlsZE5vdGVTZWxlY3Rvcih7IHBvcnRyYWl0IH0pIHtcbiAgdmFyIG9wdGlvbnMgPSBbXTtcbiAgZm9yIChjb25zdCBzY2FsZUlkIGluIHNjYWxlcykge1xuICAgIG9wdGlvbnMgPSBbXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgYDxvcHRpb24gdmFsdWU9XCIke3NjYWxlSWR9XCI+JHtzY2FsZXNbc2NhbGVJZF0ubmFtZX08L29wdGlvbj5gXG4gICAgXTtcbiAgfVxuICB2YXIgc2NhbGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90ZVNlbGVjdCcpO1xuICBzY2FsZVNlbGVjdC5pbm5lckhUTUwgPSBvcHRpb25zLmpvaW4oKTtcbiAgc2NhbGVTZWxlY3QudmFsdWUgPSBzZWxlY3RlZFNjYWxlLmlkO1xufVxuXG5mdW5jdGlvbiByZURyYXdBcHAoKSB7XG4gIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPiB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cmFwcGVyJykuY2xhc3NOYW1lID0gJ2FwcC13cmFwcGVyIHBvcnRyYWl0LW1vZGUnO1xuICAgIGJ1aWxkTm90ZVNlbGVjdG9yKHsgcG9ydHJhaXQ6IHRydWUgfSk7XG4gICAgYnVpbGRGcmV0Ym9hcmQoeyBwb3J0cmFpdDogdHJ1ZSB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKS5jbGFzc05hbWUgPSAnYXBwLXdyYXBwZXIgbGFuZHNjYXBlLW1vZGUnO1xuICBidWlsZE5vdGVTZWxlY3Rvcih7IHBvcnRyYWl0OiBmYWxzZSB9KTtcbiAgYnVpbGRGcmV0Ym9hcmQoeyBwb3J0cmFpdDogZmFsc2UgfSk7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gIHJlRHJhd0FwcCgpO1xufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RlU2VsZWN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZSA9PiB7XG4gIHNlbGVjdGVkU2NhbGUgPSBzY2FsZXNbZS50YXJnZXQudmFsdWVdO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90ZVNlbGVjdCcpLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG5cbiAgcmVEcmF3QXBwKCk7XG59KTtcblxucmVEcmF3QXBwKCk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmdWxsU2NyZWVuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgaWYgKCFzY3JlZW5mdWxsLmlzRW5hYmxlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBzY3JlZW5mdWxsLnRvZ2dsZSgpO1xufSk7XG4iXX0=