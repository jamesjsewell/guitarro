"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}var intervals=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],standardTuningNotes=[intervals[4],intervals[9],intervals[2],intervals[7],intervals[11],intervals[4]],scalesMap={},steps=[2,2,1,2,2,2,1];function buildScale(a){for(var b,c=[],d=intervals.indexOf(a),e=0,f=steps;e<f.length;e++){if(b=f[e],!intervals[d+b]){var g=d===intervals.length-1&&2===b?1:0;d=g,c=[].concat(_toConsumableArray(c),[intervals[g]]);continue}c=[].concat(_toConsumableArray(c),[intervals[d+b]]),d+=b}return c}function buildScalesMap(){for(var a,b=0,c=intervals;b<c.length;b++)a=c[b],scalesMap=_objectSpread({},scalesMap,_defineProperty({},a,{id:a,notes:buildScale(a)}))}buildScalesMap();var selectedScale=scalesMap.C;function getNotesOfString(a){for(var b=[],c=11===intervals.indexOf(a)?0:intervals.indexOf(a)+1;11>=b.length;)intervals[c]||(c=0),b=[].concat(_toConsumableArray(b),[intervals[c]]),c++;return b}function buildFretboard(a){var b=a.portrait,c=!0===b?[].concat(standardTuningNotes):[].concat(standardTuningNotes).reverse();document.getElementById("fretBoard").innerHTML="<div class=\"frets-edge\">".concat(buildFrets(),"</div> \n    ").concat(c.map(function(a,b){return"".concat(buildString(a)," ").concat(5>b?"<div class=\"frets\">".concat(buildFrets(b),"</div>"):"")}).join("")," \n    <div class=\"frets-edge\">").concat(buildFrets(),"</div>\n    </div>")}var buildFrets=function(a){for(var b="",c=0;12>c;c++)b+="<div class=\"fret\">".concat(2===a&&(4===c||6===c||8===c)||11===c&&(0===a||4===a)?"<div class=\"fret-dot\"></div>":"","</div>");return b},buildString=function(a){return"<div class=\"guitar-string\">".concat(getNotesOfString(a).map(function(a){return"<div class=\"note\">".concat(selectedScale.notes.includes(a)?"<div class=\"note-text-backdrop\"></div><span class=\"note-text\"><p>".concat(a,"</p></span>"):"","</div>")}).join(""),"</div>")};function buildNoteSelector(a){var b=a.portrait,c=[];for(var e in scalesMap)c=[].concat(_toConsumableArray(c),["<option value=\"".concat(e,"\">").concat(e,"</option>")]);var d=document.getElementById("noteSelect");d.innerHTML=c.join(),d.value=selectedScale.id}function reDrawApp(){return window.innerHeight>window.innerWidth?(document.getElementById("wrapper").className="app-wrapper portrait-mode",buildNoteSelector({portrait:!0}),void buildFretboard({portrait:!0})):void(document.getElementById("wrapper").className="app-wrapper landscape-mode",buildNoteSelector({portrait:!1}),buildFretboard({portrait:!1}))}window.addEventListener("resize",function(){reDrawApp()}),document.getElementById("noteSelect").addEventListener("change",function(a){selectedScale=scalesMap[a.target.value],document.getElementById("noteSelect").value=a.target.value,reDrawApp()}),reDrawApp(),document.getElementById("fullScreen").addEventListener("click",function(){screenfull.isEnabled&&screenfull.toggle()});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGludGVydmFscyA9IFtcbiAgJ0MnLFxuICAnQyMnLFxuICAnRCcsXG4gICdEIycsXG4gICdFJyxcbiAgJ0YnLFxuICAnRiMnLFxuICAnRycsXG4gICdHIycsXG4gICdBJyxcbiAgJ0EjJyxcbiAgJ0InXG5dO1xuXG5jb25zdCBzdGFuZGFyZFR1bmluZ05vdGVzID0gW1xuICBpbnRlcnZhbHNbNF0sXG4gIGludGVydmFsc1s5XSxcbiAgaW50ZXJ2YWxzWzJdLFxuICBpbnRlcnZhbHNbN10sXG4gIGludGVydmFsc1sxMV0sXG4gIGludGVydmFsc1s0XVxuXTtcblxubGV0IHNjYWxlc01hcCA9IHt9O1xuXG5jb25zdCBzdGVwcyA9IFsyLCAyLCAxLCAyLCAyLCAyLCAxXTtcblxuZnVuY3Rpb24gYnVpbGRTY2FsZShyb290Tm90ZSkge1xuICBsZXQgc2NhbGUgPSBbXTtcblxuICBsZXQgaSA9IGludGVydmFscy5pbmRleE9mKHJvb3ROb3RlKTtcbiAgZm9yIChjb25zdCBzdGVwIG9mIHN0ZXBzKSB7XG4gICAgaWYgKCFpbnRlcnZhbHNbaSArIHN0ZXBdKSB7XG4gICAgICBsZXQgc3RhcnRJbmRleCA9IGkgPT09IGludGVydmFscy5sZW5ndGggLSAxICYmIHN0ZXAgPT09IDIgPyAxIDogMDtcbiAgICAgIGkgPSBzdGFydEluZGV4O1xuICAgICAgc2NhbGUgPSBbLi4uc2NhbGUsIGludGVydmFsc1tzdGFydEluZGV4XV07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBzY2FsZSA9IFsuLi5zY2FsZSwgaW50ZXJ2YWxzW2kgKyBzdGVwXV07XG5cbiAgICBpICs9IHN0ZXA7XG4gIH1cbiAgcmV0dXJuIHNjYWxlO1xufVxuXG5mdW5jdGlvbiBidWlsZFNjYWxlc01hcCgpIHtcbiAgZm9yIChsZXQgaW50ZXJ2YWwgb2YgaW50ZXJ2YWxzKSB7XG4gICAgc2NhbGVzTWFwID0ge1xuICAgICAgLi4uc2NhbGVzTWFwLFxuICAgICAgW2ludGVydmFsXTogeyBpZDogaW50ZXJ2YWwsIG5vdGVzOiBidWlsZFNjYWxlKGludGVydmFsKSB9XG4gICAgfTtcbiAgfVxufVxuXG5idWlsZFNjYWxlc01hcCgpO1xuXG52YXIgc2VsZWN0ZWRTY2FsZSA9IHNjYWxlc01hcFsnQyddO1xuXG5mdW5jdGlvbiBnZXROb3Rlc09mU3RyaW5nKHN0YXJ0aW5nTm90ZSkge1xuICB2YXIgbm90ZXMgPSBbXTtcbiAgdmFyIGkgPVxuICAgIGludGVydmFscy5pbmRleE9mKHN0YXJ0aW5nTm90ZSkgPT09IDExXG4gICAgICA/IDBcbiAgICAgIDogaW50ZXJ2YWxzLmluZGV4T2Yoc3RhcnRpbmdOb3RlKSArIDE7XG5cbiAgd2hpbGUgKG5vdGVzLmxlbmd0aCA8PSAxMSkge1xuICAgIGlmICghaW50ZXJ2YWxzW2ldKSB7XG4gICAgICBpID0gMDtcbiAgICB9XG4gICAgbm90ZXMgPSBbLi4ubm90ZXMsIGludGVydmFsc1tpXV07XG4gICAgaSsrO1xuICB9XG5cbiAgcmV0dXJuIG5vdGVzO1xufVxuXG5mdW5jdGlvbiBidWlsZEZyZXRib2FyZCh7IHBvcnRyYWl0IH0pIHtcbiAgY29uc3Qgc3RhcnRpbmdOb3RlcyA9XG4gICAgcG9ydHJhaXQgPT09IHRydWVcbiAgICAgID8gWy4uLnN0YW5kYXJkVHVuaW5nTm90ZXNdXG4gICAgICA6IFsuLi5zdGFuZGFyZFR1bmluZ05vdGVzXS5yZXZlcnNlKCk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgJ2ZyZXRCb2FyZCdcbiAgKS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImZyZXRzLWVkZ2VcIj4ke2J1aWxkRnJldHMoKX08L2Rpdj4gXG4gICAgJHtzdGFydGluZ05vdGVzXG4gICAgICAubWFwKFxuICAgICAgICAoc3RhcnRpbmdOb3RlLCBzdHJpbmdOdW1iZXIpID0+XG4gICAgICAgICAgYCR7YnVpbGRTdHJpbmcoc3RhcnRpbmdOb3RlKX0gJHtcbiAgICAgICAgICAgIHN0cmluZ051bWJlciA8IDVcbiAgICAgICAgICAgICAgPyBgPGRpdiBjbGFzcz1cImZyZXRzXCI+JHtidWlsZEZyZXRzKHN0cmluZ051bWJlcil9PC9kaXY+YFxuICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgfWBcbiAgICAgIClcbiAgICAgIC5qb2luKCcnKX0gXG4gICAgPGRpdiBjbGFzcz1cImZyZXRzLWVkZ2VcIj4ke2J1aWxkRnJldHMoKX08L2Rpdj5cbiAgICA8L2Rpdj5gO1xufVxuXG5jb25zdCBidWlsZEZyZXRzID0gc3RyaW5nTnVtYmVyID0+IHtcbiAgbGV0IGZyZXRzID0gYGA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgIGZyZXRzICs9IGA8ZGl2IGNsYXNzPVwiZnJldFwiPiR7XG4gICAgICAoc3RyaW5nTnVtYmVyID09PSAyICYmIChpID09PSA0IHx8IGkgPT09IDYgfHwgaSA9PT0gOCkpIHx8XG4gICAgICAoaSA9PT0gMTEgJiYgKHN0cmluZ051bWJlciA9PT0gMCB8fCBzdHJpbmdOdW1iZXIgPT09IDQpKVxuICAgICAgICA/IGA8ZGl2IGNsYXNzPVwiZnJldC1kb3RcIj48L2Rpdj5gXG4gICAgICAgIDogJydcbiAgICB9PC9kaXY+YDtcbiAgfVxuICByZXR1cm4gZnJldHM7XG59O1xuXG5jb25zdCBidWlsZFN0cmluZyA9IHN0YXJ0aW5nTm90ZSA9PlxuICBgPGRpdiBjbGFzcz1cImd1aXRhci1zdHJpbmdcIj4ke2dldE5vdGVzT2ZTdHJpbmcoc3RhcnRpbmdOb3RlKVxuICAgIC5tYXAoXG4gICAgICBub3RlID0+XG4gICAgICAgIGA8ZGl2IGNsYXNzPVwibm90ZVwiPiR7XG4gICAgICAgICAgc2VsZWN0ZWRTY2FsZS5ub3Rlcy5pbmNsdWRlcyhub3RlKVxuICAgICAgICAgICAgPyBgPGRpdiBjbGFzcz1cIm5vdGUtdGV4dC1iYWNrZHJvcFwiPjwvZGl2PjxzcGFuIGNsYXNzPVwibm90ZS10ZXh0XCI+PHA+JHtub3RlfTwvcD48L3NwYW4+YFxuICAgICAgICAgICAgOiAnJ1xuICAgICAgICB9PC9kaXY+YFxuICAgIClcbiAgICAuam9pbignJyl9PC9kaXY+YDtcblxuZnVuY3Rpb24gYnVpbGROb3RlU2VsZWN0b3IoeyBwb3J0cmFpdCB9KSB7XG4gIHZhciBvcHRpb25zID0gW107XG4gIGZvciAoY29uc3Qgc2NhbGVOYW1lIGluIHNjYWxlc01hcCkge1xuICAgIG9wdGlvbnMgPSBbXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgYDxvcHRpb24gdmFsdWU9XCIke3NjYWxlTmFtZX1cIj4ke3NjYWxlTmFtZX08L29wdGlvbj5gXG4gICAgXTtcbiAgfVxuICB2YXIgc2NhbGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90ZVNlbGVjdCcpO1xuICBzY2FsZVNlbGVjdC5pbm5lckhUTUwgPSBvcHRpb25zLmpvaW4oKTtcbiAgc2NhbGVTZWxlY3QudmFsdWUgPSBzZWxlY3RlZFNjYWxlLmlkO1xufVxuXG5mdW5jdGlvbiByZURyYXdBcHAoKSB7XG4gIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPiB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cmFwcGVyJykuY2xhc3NOYW1lID0gJ2FwcC13cmFwcGVyIHBvcnRyYWl0LW1vZGUnO1xuICAgIGJ1aWxkTm90ZVNlbGVjdG9yKHsgcG9ydHJhaXQ6IHRydWUgfSk7XG4gICAgYnVpbGRGcmV0Ym9hcmQoeyBwb3J0cmFpdDogdHJ1ZSB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKS5jbGFzc05hbWUgPSAnYXBwLXdyYXBwZXIgbGFuZHNjYXBlLW1vZGUnO1xuICBidWlsZE5vdGVTZWxlY3Rvcih7IHBvcnRyYWl0OiBmYWxzZSB9KTtcbiAgYnVpbGRGcmV0Ym9hcmQoeyBwb3J0cmFpdDogZmFsc2UgfSk7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gIHJlRHJhd0FwcCgpO1xufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RlU2VsZWN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZSA9PiB7XG4gIHNlbGVjdGVkU2NhbGUgPSBzY2FsZXNNYXBbZS50YXJnZXQudmFsdWVdO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90ZVNlbGVjdCcpLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG5cbiAgcmVEcmF3QXBwKCk7XG59KTtcblxucmVEcmF3QXBwKCk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmdWxsU2NyZWVuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgaWYgKCFzY3JlZW5mdWxsLmlzRW5hYmxlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBzY3JlZW5mdWxsLnRvZ2dsZSgpO1xufSk7XG4iXX0=